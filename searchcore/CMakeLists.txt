# Copyright 2017 Yahoo Holdings. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.
vespa_define_module(
    DEPENDS
    fastos
    fnet
    vespalog
    vespalib
    metrics
    config_cloudconfig
    fastlib_fast
    juniper
    configdefinitions
    document
    searchlib
    messagebus
    documentapi
    persistence
    searchcorespi
    searchsummary
    fileacquirer

    LIBS
    src/vespa/searchcore/config
    src/vespa/searchcore/fdispatch/common
    src/vespa/searchcore/fdispatch/program
    src/vespa/searchcore/fdispatch/search
    src/vespa/searchcore/grouping
    src/vespa/searchcore/proton/attribute
    src/vespa/searchcore/proton/bucketdb
    src/vespa/searchcore/proton/common
    src/vespa/searchcore/proton/docsummary
    src/vespa/searchcore/proton/documentmetastore
    src/vespa/searchcore/proton/feedoperation
    src/vespa/searchcore/proton/flushengine
    src/vespa/searchcore/proton/index
    src/vespa/searchcore/proton/initializer
    src/vespa/searchcore/proton/matchengine
    src/vespa/searchcore/proton/matching
    src/vespa/searchcore/proton/metrics
    src/vespa/searchcore/proton/persistenceengine
    src/vespa/searchcore/proton/reference
    src/vespa/searchcore/proton/reprocessing
    src/vespa/searchcore/proton/server
    src/vespa/searchcore/proton/summaryengine
    src/vespa/searchcore/proton/test
    src/vespa/searchcore/util

    APPS
    src/apps/fdispatch
    src/apps/proton
    src/apps/tests
    src/apps/verify_ranksetup
    src/apps/vespa-dump-feed
    src/apps/vespa-gen-testdocs
    src/apps/vespa-proton-cmd
    src/apps/vespa-transactionlog-inspect

    TESTS
    src/tests/applyattrupdates
    src/tests/fdispatch/randomrow
    src/tests/fdispatch/search_path
    src/tests/grouping
    src/tests/proton/attribute
    src/tests/proton/attribute/attribute_aspect_delayer
    src/tests/proton/attribute/attribute_directory
    src/tests/proton/attribute/attribute_initializer
    src/tests/proton/attribute/attribute_manager
    src/tests/proton/attribute/attribute_populator
    src/tests/proton/attribute/attribute_usage_filter
    src/tests/proton/attribute/attributes_state_explorer
    src/tests/proton/attribute/document_field_populator
    src/tests/proton/attribute/exclusive_attribute_read_accessor
    src/tests/proton/attribute/imported_attributes_context
    src/tests/proton/attribute/imported_attributes_repo
    src/tests/proton/bucketdb/bucketdb
    src/tests/proton/common
    src/tests/proton/common/document_type_inspector
    src/tests/proton/common/hw_info_sampler
    src/tests/proton/common/state_reporter_utils
    src/tests/proton/docsummary
    src/tests/proton/document_iterator
    src/tests/proton/documentdb
    src/tests/proton/documentdb/buckethandler
    src/tests/proton/documentdb/clusterstatehandler
    src/tests/proton/documentdb/combiningfeedview
    src/tests/proton/documentdb/configurer
    src/tests/proton/documentdb/document_scan_iterator
    src/tests/proton/documentdb/document_subdbs
    src/tests/proton/documentdb/documentbucketmover
    src/tests/proton/documentdb/documentdbconfig
    src/tests/proton/documentdb/documentdbconfigscout
    src/tests/proton/documentdb/feedhandler
    src/tests/proton/documentdb/feedview
    src/tests/proton/documentdb/fileconfigmanager
    src/tests/proton/documentdb/job_tracked_maintenance_job
    src/tests/proton/documentdb/lid_space_compaction
    src/tests/proton/documentdb/maintenancecontroller
    src/tests/proton/documentdb/move_operation_limiter
    src/tests/proton/documentdb/storeonlyfeedview
    src/tests/proton/documentdb/threading_service_config
    src/tests/proton/documentmetastore
    src/tests/proton/documentmetastore/lidreusedelayer
    src/tests/proton/feed_and_search
    src/tests/proton/feedoperation
    src/tests/proton/feedtoken
    src/tests/proton/flushengine
    src/tests/proton/flushengine/prepare_restart_flush_strategy
    src/tests/proton/flushengine/shrink_lid_space_flush_target
    src/tests/proton/index
    src/tests/proton/index/index_writer
    src/tests/proton/initializer
    src/tests/proton/matchengine
    src/tests/proton/matching
    src/tests/proton/matching/constant_value_repo
    src/tests/proton/matching/docid_range_scheduler
    src/tests/proton/matching/index_environment
    src/tests/proton/matching/match_loop_communicator
    src/tests/proton/matching/match_phase_limiter
    src/tests/proton/matching/partial_result
    src/tests/proton/metrics/documentdb_job_trackers
    src/tests/proton/metrics/job_load_sampler
    src/tests/proton/metrics/job_tracked_flush
    src/tests/proton/metrics/metrics_engine
    src/tests/proton/persistenceconformance
    src/tests/proton/persistenceengine
    src/tests/proton/persistenceengine/persistence_handler_map
    src/tests/proton/proton
    src/tests/proton/proton_config_fetcher
    src/tests/proton/proton_configurer
    src/tests/proton/reference/gid_to_lid_change_handler
    src/tests/proton/reference/gid_to_lid_change_listener
    src/tests/proton/reference/gid_to_lid_change_registrator
    src/tests/proton/reference/gid_to_lid_mapper
    src/tests/proton/reference/document_db_reference_registry
    src/tests/proton/reference/document_db_reference_resolver
    src/tests/proton/reprocessing/attribute_reprocessing_initializer
    src/tests/proton/reprocessing/document_reprocessing_handler
    src/tests/proton/reprocessing/reprocessing_runner
    src/tests/proton/server
    src/tests/proton/server/disk_mem_usage_filter
    src/tests/proton/server/health_adapter
    src/tests/proton/server/memory_flush_config_updater
    src/tests/proton/server/memoryflush
    src/tests/proton/server/visibility_handler
    src/tests/proton/statusreport
    src/tests/proton/summaryengine
    src/tests/proton/verify_ranksetup

    TEST_DEPENDS
    messagebus_messagebus-test
)

vespa_install_script(src/apps/vespa-remove-indexes/vespa-remove-index.sh vespa-remove-index bin)
